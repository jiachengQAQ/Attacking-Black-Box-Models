Step 1: Since the synthetic data used for querying are generated by SDMs and are subject to upload file size limitations, we cannot upload images or any pre-train model. If you want to run the code. First, you will need to execute generation_syn_data.py to generate images for CIFAR-10 and CIFAR-100 on your side.

Step 2: Since the target model needs to be trained on a real dataset, you can run 'train.py' to train it and then save the checkpoint. Afterwards, use the synthetic data generated in Step 1 to similarly train the substitute model by running 'train.py'.

Step 3: Select subsets from the synthetic data generated in Step 1 like (5k) and run the following code to train for the DFME (Data-Free Model Extraction) and DFTA (Data-Free Transfer Attack) tasks.

Run DFME task on CIFAR-10 for soft-label:
python train_clone.py --data_type=cifar10 --query_number=5000 --loss=l1 --only_dfme=True

Run DFME task on CIFAR-10 for hard-label:
python train_clone.py --data_type=cifar10 --query_number=5000 --loss=ce --only_dfme=True

Run DFME task on CIFAR-100 for soft-label:
python train_clone.py --data_type=cifar100 --query_number=150000 --loss=l1 --only_dfme=True

Run DFME task on CIFAR-100 for hard-label:
python train_clone.py --data_type=cifar10 --query_number=150000 --loss=ce --only_dfme=True

Run DFTA task on CIFAR-10 for soft-label, BIM, Target:
python train_clone.py --data_type=cifar10   --query_number=150000 --attack_type=BIM --loss=l1 --target=True

Run DFTA task on CIFAR-10 for hard-label, BIM, Target:
python train_clone.py --data_type=cifar10   --query_number=150000 --attack_type=BIM --loss=ce --target=True

Run DFTA task on CIFAR-100 for soft-label, BIM, Target:
python train_clone.py --data_type=cifar100 --query_number=15000 --attack_type=BIM --loss=l1 --target=True

Run DFTA task on CIFAR-100 for hard-label, BIM, Target:
python train_clone.py --data_type=cifar10 --query_number=15000 --attack_type=BIM --loss=ce --target=True

We will release all the syn.data and checkpoint once the paper get accepted for user to fast deployment.
